-- WalkSpeed.lua
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")

local speedEnabled = false
local playerSpeed = 21
local conn

return function(Value)
    speedEnabled = Value
    if conn then conn:Disconnect() end
    if speedEnabled then
        conn = RunService.RenderStepped:Connect(function()
            if LocalPlayer.Character then
                local humanoid = LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid")
                if humanoid and humanoid.WalkSpeed ~= playerSpeed then
                    humanoid.WalkSpeed = playerSpeed
                end
            end
        end)
    end
end
